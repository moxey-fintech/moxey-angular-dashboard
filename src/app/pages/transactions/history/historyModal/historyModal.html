<div ng-hide="updatingTransaction" class="modal-content">
    <div class="modal-header">
        <button type="button" class="close" ng-click="$dismiss()" aria-label="Close">
            <em class="ion-ios-close-empty sn-link-close"></em>
        </button>
        <h4 class="modal-title" id="myModalLabel">Transaction details</h4>
    </div>
    <div class="modal-body">
        <div class="row">
            <a ng-hide="editingTransaction" class="pull-right divider pointer edit-transaction-divider"
               ng-click="toggleEditingTransaction()"><i class="fa fa-pencil"></i> Edit transaction</a>
            <a ng-show="editingTransaction" class="pull-right divider pointer edit-transaction-divider"
               ng-click="toggleEditingTransaction()"><i class="fa fa-times"></i> Cancel edit</a>
        </div>
        <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                <p class="text-subtle">Id: </p>
            </div>
            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding">
                <span ng-bind="transaction.id"></span>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider" id="transaction-modal-mid">
                <p class="text-subtle">User: </p>
            </div>
            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding transaction-details-user">
                <a ng-show="transaction.user" class="pointer" ng-click="goToUser()" ng-bind="transaction.userInfo"></a>
                <a ng-hide="transaction.user" class="pointer" ng-click="goToTransactionAccount(transaction)" ng-bind="transaction.account.reference"></a>
                <i ng-show="retrievedUserObj.id" class="fa fa-user transaction-details-user-icon" aria-hidden="true"></i>
                <div class="row transaction-details-user-details" style="z-index: 1;">
                    <table>
                        <tr>
                            <td style="text-align: right" width="45%">Name:</td>
                            <td style="padding-left: 10px">{{retrievedUserObj.first_name}} {{retrievedUserObj.last_name}}</td>
                        </tr>
                        <tr>
                            <th style="text-align: right" width="45%">Created date:</th>
                            <td style="padding-left: 10px" ng-show="retrievedUserObj.created">{{retrievedUserObj.created | date:'mediumDate'}}, {{retrievedUserObj.created | date:'shortTime'}}</td>
                        </tr>
                        <tr>
                            <th style="text-align: right" width="45%">Last login:</th>
                            <td style="padding-left: 10px" ng-show="retrievedUserObj.last_login">{{retrievedUserObj.last_login | date:'mediumDate'}}, {{retrievedUserObj.last_login | date:'shortTime'}}</td>
                        </tr>
                        <tr>
                            <th style="text-align: right" width="45%">Group:</th>
                            <td style="padding-left: 10px" ng-bind="retrievedUserObj.groups[0].name"></td>
                        </tr>
                        <tr>
                            <th style="text-align: right" width="45%">KYC status:</th>
                            <td style="padding-left: 10px" class="kyc-status" ng-bind="retrievedUserObj.kyc.status | capitalizeWord" ng-class="{'kyc-status-verified': retrievedUserObj.kyc.status === 'verified', 'kyc-status-pending':  retrievedUserObj.kyc.status === 'pending'}"></td>
                        </tr>
                        <tr>
                            <th style="text-align: right" width="45%">MFA status:</th>
                            <td style="padding-left: 10px" ng-bind="mfaEnabled" ng-class="{'mfa-enabled': mfaEnabled === 'Enabled', 'mfa-disabled':  mfaEnabled === 'Disabled'}"></td>
                        </tr>
                        <tr ng-show="mfaOBj.updated">
                            <th style="text-align: right" width="45%">MFA last updated:</th>
                            <td style="padding-left: 10px" ng-show="mfaOBj.updated">{{mfaOBj.updated | date:'mediumDate'}}, {{mfaOBj.updated | date:'shortTime'}}</td>
                        </tr>
                        <tr ng-show="retrievedUserObj.metadata">
                            <th style="text-align: right" width="45%">User metadata:</th>
                            <td style="padding-left: 10px" ng-bind="retrievedUserObj.metadata"></td>
                        </tr>
                    </table>
                </div>
                &nbsp;<span ng-show="hasTempUser">(temporary user)</span>
            </div>
        </div>
        <div ng-hide="txn_withdraw" class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                <p class="text-subtle">Recipient: </p>
            </div>
            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding">
                <p ng-show="transaction.partner">
                    <span ng-show="transaction.partner.user && transaction.partner.user.identifier">{{transaction.recipient}}</span>
                    <a ng-hide="transaction.partner.user && transaction.partner.user.identifier" class="pointer" ng-click="goToPartnerAccount(partnerAccountReference)">
                        {{partnerAccountReference}}
                    </a>
                    &nbsp;<span ng-show="hasTempPartner">(temporary user)</span>
                </p>
                <p ng-hide="transaction.partner"></p>
            </div>
        </div>
        <div ng-hide="txn_withdraw" class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                <p class="text-subtle">Type: </p>
            </div>
            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding">
                <p ng-bind="transaction.tx_type | capitalizeWord"></p>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                <p class="text-subtle">Balance: </p>
            </div>
            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding">
                <p ng-bind="transaction.balance | currencyModifiersFilter: transaction.currency.divisibility | commaSeperateNumberFilter"></p>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                <p class="text-subtle">Account reference:</p>
            </div>
            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding  transaction-quick-list">
                <a ng-show="transaction.user" class="pointer" ng-click="goToTransactionAccount(transaction)" ng-bind="transaction.account.reference"></a>
                <a ng-hide="transaction.user" class="pointer" ng-click="goToTransactionAccount(transaction)" ng-bind="transaction.account.reference"></a>
                <i ng-show="transaction.account.reference" class="fa fa-list-alt transaction-account-icon" aria-hidden="true"></i>&nbsp;
                <i ng-show="duplicatesExist && txn_withdraw" tooltip-class="duplicate-transction-tooltip" uib-tooltip-html="'A duplicate transaction has been found in the last 10 transactions.
                 Hover over the account icon to view.'" class="ion-information-circled setup-groups-tooltip duplicate-transaction"></i>
                <div ng-show="retrievedAccountTransactions.length > 0" class="row transaction-account-details">
                    <p class="transaction-tooltip-title" style="margin: 12px auto 10px 12px;">Recent transactions:</p>
                    <table class="table custom-table" style="margin-left: 7px;">
                        <tr style="font-weight: bold;">
                            <th width="12%">Type</th>
                            <th width="10%">Currency</th>
                            <th width="15%">Amount</th>
                            <th width="15%">Subtype</th>
                            <th width="15%">Status</th>
                            <th width="33%">Date</th>
                        </tr>
                        <tr ng-repeat="transaction in retrievedAccountTransactions | limitTo: 10 | orderBy: '-created' track by $index" 
                            style="color: white; font-weight: bold; line-height: 1;" >
                            <td width="12%" ng-class="{'duplicate-transaction': transaction.possibleDuplicate}">{{transaction.tx_type}}</td>
                            <td width="10%" ng-class="{'duplicate-transaction': transaction.possibleDuplicate}">{{transaction.currency.code}}</td>
                            <td width="15%" ng-class="{'duplicate-transaction': transaction.possibleDuplicate}">{{transaction.amount | currencyModifiersFilter: transaction.currency.divisibility | commaSeperateNumberFilter}}</td>
                            <td width="15%" ng-class="{'duplicate-transaction': transaction.possibleDuplicate}">{{transaction.subtype}}</td>
                            <td width="15%" ng-class="{'duplicate-transaction': transaction.possibleDuplicate}">{{transaction.status | capitalizeWord}}</td>
                            <td width="33%" ng-class="{'duplicate-transaction': transaction.possibleDuplicate}">{{transaction.created | date:'mediumDate'}}, {{transaction.created | date:'shortTime'}}</td>
                        </tr>
                    </table>
                </div>
                <div ng-show="retrievedAccountTransactions.length == 0"
                     ng-class="{'no-account-transactions': retrievedAccountTransactions.length == 0}"
                     class="row transaction-account-details"  style="color: white">
                    <i>No transactions exist for this account.</i>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                <p class="text-subtle">Account name:</p>
            </div>
            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding  transaction-quick-list">
                <p ng-show="transaction.user" ng-bind="transaction.account.name"></p>
            </div>
        </div>
        <!-- 
        <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                <p class="text-subtle">Type: </p>
            </div>
            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding">
                <p ng-bind="transaction.tx_type | capitalizeWord"></p>
            </div>
        </div>
        -->
        <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                <p class="text-subtle">Currency: </p>
            </div>
            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding">
                <p ng-bind="transaction.currency.display_code"></p>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                <p class="text-subtle">Amount: </p>
            </div>
            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding">
                <p ng-bind="transaction.amount  | currencyModifiersFilter: transaction.currency.divisibility | commaSeperateNumberFilter"></p>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                <p class="text-subtle">Fee: </p>
            </div>
            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding">
                <p ng-bind="transaction.fee | currencyModifiersFilter: transaction.currency.divisibility | commaSeperateNumberFilter"></p>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                <p class="text-subtle">Total amount: </p>
            </div>
            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding">
                <p ng-bind="transaction.total_amount  | currencyModifiersFilter: transaction.currency.divisibility | commaSeperateNumberFilter"></p>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                <p class="text-subtle">Subtype: </p>
            </div>
            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding">
                <p ng-bind="transaction.subtype"></p>
            </div>
        </div>
        
        <div class="row" ng-style="(!editingTransaction || transaction.status !== 'Complete' || transaction.subtype !== 'receive_reward' || transaction.subtype === 'send_reward') && {'margin-bottom': '10px'}">
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                <p class="text-subtle">Status: </p>
            </div>
            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding" style="display: flex; align-items: center; justify-content: space-between;">
                <span ng-hide="editingTransaction" ng-bind="transaction.status"></span>
                <select ng-show="editingTransaction" class="form-control divider pointer"
                        ng-model="updateTransactionObj.status" ng-change="checkTransactionPurity()"
                        ng-options="option for option in editTransactionStatusOptions">
                </select>
                <div ng-hide="editingTransaction || transaction.status === 'Complete' || transaction.subtype === 'receive_reward' || transaction.subtype === 'send_reward'">
                    <!-- Rehive admin transaction approval -->
                    <button ng-hide='isOfTypeCrypto || txn_unfunded' class="btn btn-primary pull-right" ng-click="approveTransaction()">Approve</button>

                    <!-- Crypto withdrawal approval/decline button -->
                    <button ng-show='isOfTypeCrypto' class="btn btn-danger dashboard-btn pull-right margin-left-10" style='margin-top:auto;' ng-click="confirmCryptoTxnDecline()">Decline</button>
                    <button ng-show='isOfTypeCrypto' class="btn btn-primary dashboard-btn pull-right" style='margin-top:auto;' ng-click="confirmCryptoTxnApproval()">Approve</button>

                    <!-- Bitcoin unfunded transaction reprocess/cancel button -->
                    <button ng-show='txn_unfunded' class="btn btn-danger dashboard-btn pull-right margin-left-10" style='margin-top:auto;' ng-click="confirmCancelUnfundedBitcoinTransaction()">Decline</button>
                    <button ng-show='txn_unfunded' class="btn btn-primary dashboard-btn pull-right" style='margin-top:auto;' ng-click="confirmReprocessBitcoinUnfundedTransaction()">Approve</button>
                </div>
            </div>
        </div>
        <div ng-show="transaction.destination_transaction" class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                <p class="text-subtle">Destination Id: </p>
            </div>
            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding">
                <p ng-bind="transaction.destination_transaction.id || 'ID pending creation'"></p>
            </div>
        </div>
        <div ng-show="transaction.source_transaction" class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                <p class="text-subtle">Source Id: </p>
            </div>
            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding">
                <p ng-bind="transaction.source_transaction.id"></p>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                <p class="text-subtle">Reference: </p>
            </div>
            <div ng-show="transaction.reference" class="metadata col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding">
                <pre ng-bind="transaction.reference"></pre>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                <p class="text-subtle">Note: </p>
            </div>
            <div class="metadata col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding">
                <div ng-show="updateTransactionObj.note">
                    <pre ng-hide="editingTransaction" ng-bind="updateTransactionObj.note"></pre>
                </div>
                <textarea ng-show="editingTransaction" ng-change="checkTransactionPurity()" rows="2" type="text"
                          ng-model="updateTransactionObj.note"
                          class="form-control divider metadata-input-textarea" placeholder='Enter a note'></textarea>
            </div>

        </div>
        <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                <p class="text-subtle">Created date: </p>
            </div>
            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding">
                <p>{{transaction.created | date:'mediumDate'}} {{transaction.created | date:'shortTime'}}</p>
            </div>
        </div>
                <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                <p class="text-subtle">Updated date: </p>
            </div>
            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding">
                <p>{{transaction.updated | date:'mediumDate'}} {{transaction.updated | date:'shortTime'}}</p>
            </div>
        </div>
        <div ng-show="txn_purchase && orderObj" class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                <p class="text-subtle">Order Id: </p>
            </div>
            <div class="metadata col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding">
                <a class="pointer" ng-click="goToPurchaseOrder(orderObj.id)">{{orderObj.id}}</a>
            </div>
        </div>
        <div ng-show="txn_purchase && orderObj" class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                <p class="text-subtle">Products: </p>
            </div>
            <div class="metadata col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding">
                <ul style="list-style: none; padding-left: 0">
                    <li ng-repeat="item in orderObj.items track by $index" class="bank-object-li">
                        {{item.name}}
                    </li>
                </ul>
            </div>
        </div>
        <div ng-show="txn_withdraw && !isOfTypeCrypto && isOfTypeFiat" class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                <p class="text-subtle">Bank: </p>
            </div>
            <div class="metadata col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding">
                <div class="bank-object">
                    <ul style="list-style: none; padding-left: 0">
                            <li class="row bank-object-li">
                                <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5 text-subtle" style="text-align: right; color: grey; font-weight: bold;">Number:</div>
                                <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7">
                                    {{bankObj.number}}
                                    <i ngclipboard ngclipboard-success="copiedMetadataSuccessfully()" data-clipboard-text="{{bankObj.number}}" class="fa fa-clone metadata-copy-icon pointer bank-object-clipboard"></i>
                                </div>                                
                            </li>
                            <li class="row bank-object-li">
                                <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5 text-subtle bank-object-div">Type:</div>
                                <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7">{{bankObj.type}}</div>                                
                            </li>
                            <li class="row bank-object-li">
                                <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5 text-subtle bank-object-div">Bank name:</div>
                                <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7">
                                    {{bankObj.bank_name}}
                                    <i ngclipboard ngclipboard-success="copiedMetadataSuccessfully()" data-clipboard-text="{{bankObj.bank_name}}" class="fa fa-clone metadata-copy-icon pointer bank-object-clipboard"></i>
                                </div>
                            </li>
                            <li class="row bank-object-li">
                                <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5 text-subtle bank-object-div">Bank code:</div>
                                <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7">
                                    {{bankObj.bank_code}}
                                    <i ngclipboard ngclipboard-success="copiedMetadataSuccessfully()" data-clipboard-text="{{bankObj.bank_code}}" class="fa fa-clone metadata-copy-icon pointer bank-object-clipboard"></i>
                                </div>
                            </li>
                            <li class="row bank-object-li">
                                <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5 text-subtle bank-object-div">Branch code:</div>
                                <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7">
                                    {{bankObj.branch_code}}
                                    <i ngclipboard ngclipboard-success="copiedMetadataSuccessfully()" data-clipboard-text="{{bankObj.branch_code}}" class="fa fa-clone metadata-copy-icon pointer bank-object-clipboard"></i>
                                </div>
                            </li>
                            <li class="row bank-object-li">
                                <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5 text-subtle bank-object-div">Swift:</div>
                                <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7">
                                    {{bankObj.swift}}
                                    <i ngclipboard ngclipboard-success="copiedMetadataSuccessfully()" data-clipboard-text="{{bankObj.swift}}" class="fa fa-clone metadata-copy-icon pointer bank-object-clipboard"></i>
                                </div>
                            </li>
                            <li class="row bank-object-li">
                                <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5 text-subtle bank-object-div">Iban:</div>
                                <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7">
                                    {{bankObj.iban}}
                                    <i ngclipboard ngclipboard-success="copiedMetadataSuccessfully()" data-clipboard-text="{{bankObj.iban}}" class="fa fa-clone metadata-copy-icon pointer bank-object-clipboard"></i>
                                </div>
                            </li>
                            <li class="row bank-object-li">
                                <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5 text-subtle bank-object-div">Status:</div>
                                <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7 kyc-status" ng-class="{'kyc-status-verified': bankObj.status === 'verified'}">{{bankObj.status | capitalizeWord}}</div>
                            </li>
                            <li class="row bank-object-li">
                                <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5 text-subtle bank-object-div">Date created:</div>
                                <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7">{{bankObj.created | date:'mediumDate'}} {{bankObj.created | date:'shortTime'}}</div>
                            </li>
                            <li class="row bank-object-li">
                                <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5 text-subtle bank-object-div">Last updated:</div>
                                <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7">{{bankObj.updated | date:'mediumDate'}} {{bankObj.updated | date:'shortTime'}}</div>
                            </li>
                        </ul>
                </div>
            </div>
        </div>
        <div ng-show="transaction.metadata.service_stellar" class="row">
            <div class='row'>
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider-20">
                    <p class="text-subtle">Transaction hash: </p>
                </div>
                <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding" style="word-wrap: break-word;">
                    <a href="{{stellar_explorer_link}}" target="_blank">{{ transaction.metadata.service_stellar.tx_hash }}</a>
                    <i ng-show="transaction.metadata.service_stellar.tx_hash" ngclipboard ngclipboard-success="copiedMetadataSuccessfully()" data-clipboard-text="{{transaction.metadata.service_stellar.tx_hash}}" class="fa fa-clone metadata-copy-icon pointer bank-object-clipboard stellar-txn-clipboard"></i>
                </div>
            </div>
            <div class='row crypto-data-divider'>
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                    <p class="text-subtle">Memo: </p>
                </div>
                <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding">
                    <p ng-bind="transaction.metadata.service_stellar.memo" class="stellar-txn-wrap"></p>
                    <i ng-show="transaction.metadata.service_stellar.memo" ngclipboard ngclipboard-success="copiedMetadataSuccessfully()" data-clipboard-text="{{transaction.metadata.service_stellar.memo}}" class="fa fa-clone metadata-copy-icon pointer bank-object-clipboard stellar-txn-clipboard"></i>
                </div>
            </div>
            <div class='row crypto-data-divider'>
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                    <p class="text-subtle">Sender public address: </p>
                </div>
                <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding" style="word-wrap: break-word;">
                    <a href="{{stellar_sender_link}}" target="_blank">{{ transaction.metadata.service_stellar.sender_public_address }}</a>
                    <i ng-show="transaction.metadata.service_stellar.sender_public_address" ngclipboard ngclipboard-success="copiedMetadataSuccessfully()" data-clipboard-text="{{transaction.metadata.service_stellar.sender_public_address}}" class="fa fa-clone metadata-copy-icon pointer bank-object-clipboard stellar-txn-clipboard"></i>
                </div>
            </div>
            <div class='row crypto-data-divider'>
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                    <p class="text-subtle">Recipient public address: </p>
                </div>
                <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding" style="word-wrap: break-word;">
                    <a href="{{stellar_recipient_link}}" target="_blank">{{ transaction.metadata.service_stellar.recipient_public_address }}</a>
                    <i ng-show="transaction.metadata.service_stellar.recipient_public_address" ngclipboard ngclipboard-success="copiedMetadataSuccessfully()" data-clipboard-text="{{transaction.metadata.service_stellar.recipient_public_address}}" class="fa fa-clone metadata-copy-icon pointer bank-object-clipboard stellar-txn-clipboard"></i>
                </div>
            </div>
        </div>
        <div ng-show="transaction.metadata.service_bitcoin" class="row">
                <div class='row'>
                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                        <p class="text-subtle">Transaction hash: </p>
                    </div>
                    <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding" style="word-wrap: break-word;">
                        <a href="{{blockchain_cypher_link}}" target="_blank">{{ transaction.metadata.service_bitcoin.tx_hash }}</a>
                        <i ng-show="transaction.metadata.service_stellar.tx_hash" ngclipboard ngclipboard-success="copiedMetadataSuccessfully()" data-clipboard-text="{{transaction.metadata.service_stellar.tx_hash}}" class="fa fa-clone metadata-copy-icon pointer bank-object-clipboard stellar-txn-clipboard"></i>
                    </div>
                </div>
                <div class='row crypto-data-divider'>
                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                        <p class="text-subtle">Confirmations: </p>
                    </div>
                    <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding">
                        <p ng-bind="transaction.metadata.service_bitcoin.confirmations"></p>
                    </div>
                </div>
                <div class='row crypto-data-divider'>
                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                        <p class="text-subtle">Sender public address: </p>
                    </div>
                    <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding" style="word-wrap: break-word;">
                        <a href="{{blockchain_sender_link}}" target="_blank">{{ transaction.metadata.service_bitcoin.sender_public_address }}</a>
                        <i ng-show="transaction.metadata.service_stellar.sender_public_address" ngclipboard ngclipboard-success="copiedMetadataSuccessfully()" data-clipboard-text="{{transaction.metadata.service_stellar.sender_public_address}}" class="fa fa-clone metadata-copy-icon pointer bank-object-clipboard stellar-txn-clipboard"></i>
                    </div>
                </div>
                <div class='row crypto-data-divider'>
                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 no-left-padding divider">
                        <p class="text-subtle">Recipient public address: </p>
                    </div>
                    <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-right-padding" style="word-wrap: break-word;">
                        <a href="{{blockchain_recipient_link}}" target="_blank">{{ transaction.metadata.service_bitcoin.recipient_public_address }}</a>
                        <i ng-show="transaction.metadata.service_stellar.recipient_public_address" ngclipboard ngclipboard-success="copiedMetadataSuccessfully()" data-clipboard-text="{{transaction.metadata.service_stellar.recipient_public_address}}" class="fa fa-clone metadata-copy-icon pointer bank-object-clipboard stellar-txn-clipboard"></i>
                    </div>
                </div>
        </div>
        <div ng-show="transaction.metadata && transaction.metadata.service_reward" class="row">
            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 no-left-padding divider">
                <p class="text-subtle">Reward details: </p>
            </div>
            <div class="metadata col-lg-9 col-md-9 col-sm-9 col-xs-9 no-right-padding">
                <div class="bank-object" ng-style="{ 'height' : (rewardDetails.campaign.default_status == 'pending' ? '136px' : '92px' ),'width': '416px'}" style="padding-right: 0">
                    <ul style="list-style: none; padding-left: 0">
                        <li class="row bank-object-li">
                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 text-subtle" style="color: grey;">Campaign id:</div>
                            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-padding" style="white-space: nowrap">
                                {{rewardDetails.campaign.id}}
                            </div>                                
                        </li>
                        <li class="row bank-object-li">
                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 text-subtle no-right-padding">Campaign name:</div>
                            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-padding">{{rewardDetails.campaign.name}}</div>                                
                        </li>
                        <li class="row bank-object-li">
                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 text-subtle no-right-padding">Reward id:</div>
                            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-padding"  style="white-space: nowrap">
                                {{rewardDetails.id}}
                            </div>
                        </li>
                    </ul>
                    <div ng-show="rewardDetails.campaign.default_status === 'pending'">
                        <div ng-show="rewardDetails.status == 'pending'" class="row" style="display: block; margin: 20px auto 0 auto">
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                <button style="margin-top: -8px;" class="btn btn-primary pull-right" ng-click="updateReward('accepted')">Approve</button>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                <button style="margin-top: -8px;" class="btn btn-primary" ng-click="updateReward('rejected')">Reject</button>
                            </div>
                        </div>
                        <div ng-show="rewardDetails.status == 'accepted'" class="row" style="margin: 20px auto 0 auto">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <button style="display: block; margin: -8px auto 0 auto;" class="btn btn-primary" 
                                    ng-click="updateReward('rejected')">Reject</button>
                            </div>
                        </div>
                        <div ng-show="rewardDetails.status == 'rejected'" class="row" style="margin: 20px auto 0 auto">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <button style="display: block; margin: -8px auto 0 auto;" class="btn btn-primary" 
                                    ng-click="updateReward('accepted')">Approve</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row" style="margin-top: 15px;">
            <div ng-class="{'col-lg-4 col-md-4 col-sm-4 col-xs-4': !(transaction.metadata && transaction.metadata.service_reward), 
            'col-lg-3 col-md-3 col-sm-3 col-xs-3': (transaction.metadata && transaction.metadata.service_reward)}"
            class="no-left-padding divider">
                <p class="text-subtle">Metadata: </p>
            </div>
            <div ng-show="displayingMetadata" 
            ng-class="{'col-lg-8 col-md-8 col-sm-8 col-xs-8': !(transaction.metadata && transaction.metadata.service_reward), 
            'col-lg-9 col-md-9 col-sm-9 col-xs-9': (transaction.metadata && transaction.metadata.service_reward)}"
            class="metadata no-right-padding">
                <div ng-show="formatted.metadata">
                    <pre ng-hide="editingTransaction">{{formatted.metadata}}</pre>
                </div>
                <div ng-show="!formatted.metadata && displayingMetadata">
                    <pre ng-hide="editingTransaction"><i>No transaction metadata available</i></pre>
                </div>
                <textarea ng-show="editingTransaction" ng-change="checkTransactionPurity()" rows="4" type="text"
                          ng-model="updateTransactionObj.metadata"
                          class="form-control divider metadata-input-textarea" placeholder='e.g. {"Hello" : "World"}'></textarea>
                <i ng-show="formatted.metadata" ngclipboard ngclipboard-success="copiedMetadataSuccessfully()"
                   data-clipboard-text="{{transaction.metadata}}"
                   class="fa fa-clone metadata-copy-icon pointer"></i>
            </div>
            <div ng-show="txn_withdraw || txn_purchase">
                <div ng-hide="displayingMetadata"
                ng-class="{'col-lg-8 col-md-8 col-sm-8 col-xs-8': !(transaction.metadata && transaction.metadata.service_reward), 
                'col-lg-9 col-md-9 col-sm-9 col-xs-9': (transaction.metadata && transaction.metadata.service_reward)}"
                class="metadata no-right-padding">
                    <a class="pointer" ng-click="displayingMetadata = !displayingMetadata">Click to show metadata</a>
                </div>
                <div ng-class="{'col-lg-4 col-md-4 col-sm-4 col-xs-4': !(transaction.metadata && transaction.metadata.service_reward), 
                'col-lg-3 col-md-3 col-sm-3 col-xs-3': (transaction.metadata && transaction.metadata.service_reward)}"
                class="no-left-padding divider">
                </div>
                <div ng-show="displayingMetadata" class="metadata no-right-padding"
                ng-class="{'col-lg-8 col-md-8 col-sm-8 col-xs-8': !(transaction.metadata && transaction.metadata.service_reward), 
                'col-lg-9 col-md-9 col-sm-9 col-xs-9': (transaction.metadata && transaction.metadata.service_reward)}"
                style="margin-top: -12px;">
                    <a class="pointer" ng-click="displayingMetadata = !displayingMetadata">Click to hide metadata</a>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-left-padding divider">
                <p><strong>Collection information</strong></p>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-left-padding no-right-padding divider-20">
                <p>{{transaction.collection}}</p>
            </div>
        </div>
        <div ng-show="transaction.transactionsFromCollection.length > 0">
            <div class="divider">
                <p><strong>Related transactions</strong></p>
            </div>
            <div>
                <table class="table custom-table table-striped">
                    <thead>
                    <tr>
                        <th class="rehive-table-row-first-child">Amount</th>
                        <!-- <th>Debit transaction</th> -->
                        <th>Subtype</th>
                        <th>User</th>
                        <th>Tranasction ID</th>
                    </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="transaction in transaction.transactionsFromCollection | orderBy: '-created' track by $index"
                            class="editable-row center pointer user-details-table-hover" ng-click="goToCollectionTransaction(transaction.id)">
                            <td class="table-row-center collection-transaction-element">{{transaction.currency.symbol}} {{transaction.amount | currencyModifiersFilter: transaction.currency.divisibility}}</td>
                            <!-- <td class="table-row-center transactions-list-element">{{payment.debit_tx}}</td> -->
                            <td class="table-row-center collection-transaction-element">{{transaction.subtype | capitalizeWord}}</td>
                            <td class="table-row-center collection-transaction-element">{{ transaction.user }}</td>
                            <td class="table-row-center collection-transaction-element">{{transaction.formattedId}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <div class="modal-footer row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <button type="button" ng-show="editingTransaction" ng-disabled="!untouchedTransaction" id="transaction-modal-save-button"
                ng-click="updateTransactionStatus()" ng-class="{'setup-next-btn': !untouchedTransaction,'btn-primary': untouchedTransaction}"
                class="dashboard-btn btn pull-right">Save</button>
            <button type="button" ng-show="editingTransaction"
                    ng-click="toggleEditingTransaction()"
                    class="dashboard-btn btn-default btn pull-left">Cancel edit</button>
        </div>
    </div>
</div>
<div ba-panel ng-show="updatingTransaction">
    <loading-image></loading-image>
</div>
