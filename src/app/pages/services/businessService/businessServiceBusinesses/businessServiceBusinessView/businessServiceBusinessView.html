<h1 class="al-title">Business Extension</h1>
<div>
    <button class="btn btn-default back-to-landing" ng-click="backToBusinessess()" style="margin: 0 auto 10px 0; font-size: 14px;">
        <span><i class="fas fa-arrow-left"></i></span>&nbsp;&nbsp;&nbsp;Back to businessess
    </button>
</div>
<div ng-hide="updatingBusiness">
    <div class="panel">
        <div class="panel-heading">
            <span class="user-details-panel-title">Business details
                <a ng-hide="editingBusiness" class="pull-right divider pointer edit-transaction-divider"
                    ng-click="toggleEditingBusinessDetails()"><i class="fa fa-pencil"></i>&nbsp;&nbsp;Edit</a>
                <a ng-show="editingBusiness" class="pull-right divider pointer edit-transaction-divider"
                    ng-click="toggleEditingBusinessDetails()"><i class="fa fa-times"></i>&nbsp;&nbsp;Cancel edit</a>
            </span>
        </div>
        <div class="panel-body">
            <div class="divider row">
                <div class="col-lg-5 col-md-5 col-sm-12 col-xs-12">
                    <div class="divider-25">
                        <label class="divider-20">Details</label>
                        <div class="form-group">
                            <div class="row" style="min-height: 40px;">
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-subtle">Created date:</div>
                                <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9">{{editBusinessObj.created | date:'mediumDate'}} {{editBusinessObj.created | date:'shortTime'}}</div>
                            </div>
                            <div class="row" style="min-height: 40px;">
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-subtle">Updated date:</div>
                                <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9">{{editBusinessObj.updated | date:'mediumDate'}} {{editBusinessObj.updated | date:'shortTime'}}</div>
                            </div>
                            <div class="row" style="min-height: 40px;" ng-style="editingBusiness && {'margin-bottom': '8px'}">
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-subtle">Status:</div>
                                <div ng-hide="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">{{editBusinessObj.status | capitalizeWord}}</div>
                                <div ng-show="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">
                                    <div class="overwrite-dropdown-arrow">
                                        <div class="reward-multi-select">
                                            <select class="form-control pointer" ng-model="editBusinessObj.status" 
                                                ng-change="trackBusinessParamsChange('status')" 
                                                ng-options="status.value as status.text for status in statusOptions">
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="divider-25">
                        <label class="divider-20">Business information</label>
                        <div class="form-group">
                            <div class="row" style="min-height: 40px;">
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-subtle">Owner:</div>
                                <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9">
                                    <div class="no-right-padding transaction-details-user">
                                        <a class="pointer" ng-click="goToUserDetails()">{{editBusinessObj.ownerObj.email || editBusinessObj.owner || 'None'}}&nbsp;
                                            <i ng-show="editBusinessObj.owner" class="fa fa-user transaction-user-icon" aria-hidden="true"></i></a>
                                        <div class="row transaction-details-user-details" style="z-index: 1;">
                                            <table>
                                                <tr>
                                                    <td style="text-align: right" width="25%">Name:</td>
                                                    <td style="padding-left: 10px">{{editBusinessObj.ownerObj.editBusinessObj.ownerObj}} {{userObj.last_name}}</td>
                                                </tr>
                                                <tr>
                                                    <th style="text-align: right" width="25%">Created:</th>
                                                    <td style="padding-left: 10px" ng-show="userObj.created">{{editBusinessObj.ownerObj.created | date:'mediumDate'}}</td>
                                                </tr>
                                                <tr>
                                                    <th style="text-align: right" width="25%">Last login:</th>
                                                    <td style="padding-left: 10px" ng-show="userObj.last_login">{{editBusinessObj.ownerObj.last_login | date:'mediumDate'}}</td>
                                                </tr>
                                                <tr>
                                                    <th style="text-align: right" width="25%">Group:</th>
                                                    <td style="padding-left: 10px" ng-bind="editBusinessObj.ownerObj.groups[0].name"></td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" style="min-height: 40px;">
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-subtle">Business id:</div>
                                <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9">{{editBusinessObj.id}}</div>
                            </div>
                            <div class="row" style="min-height: 40px;" ng-style="editingBusiness && {'margin-bottom': '8px'}">
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-subtle">Business name:</div>
                                <div ng-hide="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">{{editBusinessObj.name}}</div>
                                <div ng-show="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">
                                    <input type="text" ng-change="trackBusinessParamsChange('name')" ng-model="editBusinessObj.name" class="form-control" placeholder="Enter business name">
                                </div>
                            </div>
                            <div class="row" style="min-height: 40px;" ng-style="editingBusiness && {'margin-bottom': '8px'}">
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-subtle">Description:</div>
                                <div ng-hide="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">{{editBusinessObj.description || '--'}}</div>
                                <div ng-show="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">
                                    <textarea rows="4" ng-change="trackBusinessParamsChange('description')" ng-model="editBusinessObj.description" 
                                    class="form-control" placeholder="Enter business description"></textarea>
                                </div>
                            </div>
                            <div class="row" style="min-height: 40px;" ng-style="editingBusiness && {'margin-bottom': '8px'}">
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-subtle">Website</div>
                                <div ng-hide="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">
                                    <a ng-show="editBusinessObj.website" class="pointer" href="{{editBusinessObj.website}}" target="_blank">{{editBusinessObj.website}}</a>
                                    <span ng-hide="editBusinessObj.website">--</span>
                                </div>
                                <div ng-show="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">
                                    <input type="text" ng-change="trackBusinessParamsChange('website')" ng-model="editBusinessObj.website" class="form-control" placeholder="Enter business website url">
                                </div>
                            </div>
                            <div class="row" style="min-height: 40px;" ng-style="editingBusiness && {'margin-bottom': '8px'}">
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-subtle">Category:</div>
                                <div ng-hide="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">{{editBusinessObj.category ? editBusinessObj.category.name : '--'}}</div>
                                <div ng-show="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">
                                    <div class="overwrite-dropdown-arrow">
                                        <div class="reward-multi-select">
                                            <select class="form-control pointer" ng-model="editBusinessParams.category" 
                                                ng-change="trackBusinessParamsChange('category')" 
                                                ng-options="category.name for category in categoryOptions">
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" style="min-height: 40px;">
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-subtle">Currency:</div>
                                <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9">{{editBusinessObj.currency.code}}</div>
                            </div>
                            <div class="row" style="min-height: 40px;">
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-subtle">Sales account:</div>
                                <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9">{{editBusinessObj.account}}</div>
                            </div>
                        </div>
                    </div>
                    <div class="divider-25">
                        <label class="divider-20">Legal information</label>
                        <div class="form-group">
                            <div class="row" style="min-height: 40px;" ng-style="editingBusiness && {'margin-bottom': '8px'}">
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-subtle">INC. number:</div>
                                <div ng-hide="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">{{editBusinessObj.inc_number || '--'}}</div>
                                <div ng-show="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">
                                    <input type="text" ng-change="trackBusinessParamsChange('inc_number')" ng-model="editBusinessObj.inc_number" class="form-control" placeholder="Enter business Inc. number">
                                </div>
                            </div>
                            <div class="row" style="min-height: 40px;" ng-style="editingBusiness && {'margin-bottom': '8px'}">
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-subtle">VAT number:</div>
                                <div ng-hide="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">{{editBusinessObj.vat_number || '--'}}</div>
                                <div ng-show="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">
                                    <input type="text" ng-change="trackBusinessParamsChange('vat_number')" ng-model="editBusinessObj.vat_number" class="form-control" placeholder="Enter business VAT number">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-1 col-md-1 col-sm-0 col-xs-0"></div>
                <div class="col-lg-5 col-md-5 col-sm-12 col-xs-12">
                    <div class="divider-25">
                        <label class="divider-20">Business address</label>
                        <div class="form-group">
                            <div class="row" style="min-height: 40px;" ng-style="editingBusiness && {'margin-bottom': '8px'}">
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-subtle">Address line 1:</div>
                                <div ng-hide="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">{{editBusinessObj.address_line_1 || '--'}}</div>
                                <div ng-show="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">
                                    <input type="text" ng-change="trackBusinessParamsChange('address_line_1')" ng-model="editBusinessObj.address_line_1" class="form-control" placeholder="Enter business address line 1">
                                </div>
                            </div>
                            <div class="row" style="min-height: 40px;" ng-style="editingBusiness && {'margin-bottom': '8px'}">
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-subtle">Address line 2:</div>
                                <div ng-hide="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">{{editBusinessObj.address_line_2 || '--'}}</div>
                                <div ng-show="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">
                                    <input type="text" ng-change="trackBusinessParamsChange('address_line_2')" ng-model="editBusinessObj.address_line_2" class="form-control" placeholder="Enter business address line 2">
                                </div>
                            </div>
                            <div class="row" style="min-height: 40px;" ng-style="editingBusiness && {'margin-bottom': '8px'}">
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-subtle">City:</div>
                                <div ng-hide="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">{{editBusinessObj.address_city || '--'}}</div>
                                <div ng-show="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">
                                    <input type="text" ng-change="trackBusinessParamsChange('address_city')" ng-model="editBusinessObj.address_city" class="form-control" placeholder="Enter city where business is located">
                                </div>
                            </div>
                            <div class="row" style="min-height: 40px;" ng-style="editingBusiness && {'margin-bottom': '8px'}">
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-subtle">State/Province:</div>
                                <div ng-hide="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">{{editBusinessObj.address_state_province || '--'}}</div>
                                <div ng-show="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">
                                    <input type="text" ng-change="trackBusinessParamsChange('address_state_province')" ng-model="editBusinessObj.address_state_province" class="form-control" placeholder="Enter state/province your business is located">
                                </div>
                            </div>
                            <div class="row" style="min-height: 40px;" ng-style="editingBusiness && {'margin-bottom': '8px'}">
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-subtle">Country:</div>
                                <div ng-hide="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">{{editBusinessObj.address_country || '--'}}</div>
                                <div ng-show="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">
                                    <country-select class="form-control pointer" data-ng-model="editBusinessObj.address_country" ng-change="trackBusinessParamsChange('address_country')"></country-select>
                                </div>
                            </div>
                            <div class="row" style="min-height: 40px;" ng-style="editingBusiness && {'margin-bottom': '8px'}">
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-subtle">Postal code:</div>
                                <div ng-hide="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">{{editBusinessObj.address_postal_code || '--'}}</div>
                                <div ng-show="editingBusiness" class="col-lg-9 col-md-9 col-sm-9 col-xs-9">
                                    <input type="text" ng-change="trackBusinessParamsChange('address_postal_code')" ng-model="editBusinessObj.address_postal_code" class="form-control" placeholder="Enter business postal code">
                                </div>
                            </div>
                            <div class="row" style="min-height: 40px;">
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-subtle">Timezone:</div>
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 get-started-text">{{editBusinessObj.timezone || '--'}}</div>
                            </div>
                        </div>
                    </div>
                    <div class="divider-25">
                        <label class="divider-20">Branding</label>
                        <div class="form-group">
                            <div class="row" style="min-height: 40px;" ng-style="editingBusiness && {'margin-bottom': '8px'}">
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-subtle">Primary color:</div>
                                <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9">
                                    <div>
                                        <div class="color-container pull-left" id="primaryBusinessColor" ng-style="{'background-color': editBusinessObj.colors.primary}">&nbsp;</div>
                                        <button ng-hide="!editingBusiness" color-picker color-picker-show-value="false" color-picker-model="editBusinessObj.colors.primary"
                                                color-picker-position="right"
                                                class="btn btn-primary color-selector">
                                            <span class=".template-edit-icon-container"><i class="fa fa-pencil"></i></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="row" style="min-height: 40px;" ng-style="editingBusiness && {'margin-bottom': '8px'}">
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-subtle">Secondary color:</div>
                                <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9">
                                    <div>
                                        <div class="color-container pull-left" id="secondaryBusinessColor" ng-style="{'background-color': editBusinessObj.colors.secondary}">&nbsp;</div>
                                        <button ng-hide="!editingBusiness" color-picker color-picker-show-value="false" color-picker-model="editBusinessObj.colors.secondary"
                                                color-picker-position="right"
                                                class="btn btn-primary color-selector">
                                            <span class=".template-edit-icon-container"><i class="fa fa-pencil"></i></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="divider-20">
                                <span class="text-subtle" style="display: block; margin-bottom: 20px;">Business logo:</span>
                                <div> 
                                    <div ng-hide="editBusinessObj.logo || imageFile.file.name" class="placeholder-div placeholder-div-logo align-items-center">800 x 600</div>
                                    <div ng-show="editBusinessObj.logo || imageFile.file.name" class="placeholder-div placeholder-div-logo" style="background-repeat: no-repeat;border: none;">
                                        <img ng-hide="imageFile.file.name" src="{{editBusinessObj.logo}}" width="150" height="150" alt="logo Image" style=" object-fit: contain">
                                        <img ng-show="imageFile.file.name" ngf-thumbnail="imageFile.file" width="150" height="150" alt="logo Image" style=" object-fit: contain">
                                    </div>                
                                    <form ng-hide="!editingBusiness" class="divider-20" style="margin-bottom: -30px;">
                                        <fieldset class="custom-file-upload">
                                            <label>
                                                <span class="custom-file-upload-span">
                                                    <div class="template-edit-icon-container" style="margin: -162px 0 0 132px">
                                                        <i class="fa fa-2x fa-pencil" style="color: white; padding-top: 4px;"></i>
                                                    </div>
                                                </span>
                                                <input style="padding-left: 5px;text-indent: -5px;width: 300px"
                                                    type="file" ngf-select ng-model="imageFile.file" name="file"
                                                    accept="image/*" ngf-max-size="5MB" required>
                                            </label>
                                        </fieldset>
                                        <p class="small" style="margin-top: -10px">Max size is 5MB. Recommended dimensions are 800 x 600 px.</p>
                                    </form>
                                </div>
                            </div>
                            <div class="divider-20">
                                <span class="text-subtle" style="display: block; margin-bottom: 20px;">Business icon:</span>
                                <div> 
                                    <div ng-hide="editBusinessObj.icon || imageFile.iconFile.name" class="placeholder-div placeholder-div-icon align-items-center">200 x 200</div>
                                    <div ng-show="editBusinessObj.icon || imageFile.iconFile.name" class="placeholder-div placeholder-div-icon" style="background-repeat: no-repeat;border: none;">
                                        <img ng-hide="imageFile.iconFile.name" ng-src="{{editBusinessObj.icon}}" width="100" height="100" alt="icon Image">
                                        <img ng-show="imageFile.iconFile.name" ngf-thumbnail="imageFile.iconFile" width="100" height="100" alt="icon Image">
                                    </div>
                                     <form ng-hide="!editingBusiness" style="margin-bottom: -30px;">
                                        <fieldset class="custom-file-upload">
                                            <label>
                                                <span class="custom-file-upload-span">
                                                    <div class="template-edit-icon-container" style="margin: -111px 0px 0px 85px;">
                                                        <i class="fa fa-2x fa-pencil" style="color: white; padding-top: 4px;"></i>
                                                    </div>
                                                </span>
                                                <input style="padding-left: 5px;text-indent: -5px;width: 300px"
                                                    type="file" ngf-select ng-model="imageFile.iconFile" name="file"
                                                    accept="image/*" ngf-max-size="5MB" required>
                                            </label>
                                        </fieldset>
                                        <p class="small" style="margin-top: -10px">Max size is 5MB. Recommended dimensions are 200 x 200 px.</p>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div ng-show="editingBusiness" class="panel-footer" style='background-color: white;height: 68px; padding-right: 25px;'>
            <button ng-click="updateBusinessDetails();upload();" style="margin-top: 7px"
                    type="button" class="btn btn-primary dashboard-btn pull-right">Save</button>
        </div>
    </div>
    <div class="panel">
        <div class="panel-heading">
            <span class="user-details-panel-title">Business documents</span>
        </div>
        <div ng-hide="loadingBusinessDocuments"  class="panel-body">
            <div ng-show="businessDocumentsList.length > 0" class="divider">
                <div>
                    <table class="table custom-table table-striped draggable-table">
                        <thead>
                        <tr>
                            <th class="rehive-table-row-first-child">Type</th>
                            <th>Created date</th>
                            <th>Updated date</th>
                            <th>Status</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="document in businessDocumentsList | orderBy: '-created' track by $index" ng-click="openViewBusinessDocumentModal('app/pages/services/businessService/businessServiceBusinesses/businessServiceBusinessView/viewBusinessDocumentsModal/viewBusinessDocumentsModal.html', document)" class="editable-row center user-details-table-hover pointer">
                            <td class="table-row-center transactions-list-element">{{document.type | formatUnderscoreToWhitespacedFilter | capitalizeWord}} </td>
                            <td class="table-row-center transactions-list-element">{{document.created | date:'mediumDate'}} {{document.created | date:'shortTime'}}</td>
                            <td class="table-row-center transactions-list-element">{{document.created | date:'mediumDate'}} {{document.created | date:'shortTime'}}</td>
                            <td class="table-row-center transactions-list-element">{{document.status | capitalizeWord}}</td>
                            <td class="rehive-table-row-last-child pull-right margin-right-30" ng-click="$event.stopPropagation()" >
                                <div class="table-col-two-actions"> 
                                    <a ng-click="openViewBusinessDocumentModal('app/pages/services/businessService/businessServiceBusinesses/businessServiceBusinessView/viewBusinessDocumentsModal/viewBusinessDocumentsModal.html', document)"  class="pull-right pointer user-address-edit">Manage</a>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div ng-show="businessDocumentsList.length > 0">
                    <p uib-pagination boundary-links="true" items-per-page="businessDocumentsPagination.itemsPerPage"  total-items="businessDocumentsData.count" ng-model="businessDocumentsPagination.pageNo"
                       max-size="businessDocumentsPagination.maxSize" class="pagination-sm pull-right transaction-history-pagination" force-ellipses="true" ng-change="getBusinessDocuments()"
                       previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></p>
                </div>
            </div>
            <i ng-hide="businessDocumentsList.length > 0">No businesses documents added.</i>
        </div>
        <div ba-panel ng-show="loadingBusinessDocuments">
            <loading-image></loading-image>
        </div>
    </div>
</div>
<div ba-panel ng-show="updatingBusiness">
    <loading-image></loading-image>
</div>
