<div ng-hide="loadingUsers">
    <div class="panel">
        <div class="panel-heading">
            <button type="button" class="close new-transaction-close-btn" ng-click="$dismiss()" aria-label="Close">
                <em class="ion-ios-close-empty sn-link-close"></em>
            </button>
            <span class="user-details-panel-title">Add new user</span>
        </div>
        <div class="panel-body">
            <form name="addNewUserForm" class="custom-form" novalidate>
                <div>
                    <img ng-show="newUserParams.profile" ngf-thumbnail="newUserParams.profile" height="90px" width="90px">
                </div>
                <div class="form-group">
                    <label>Group <span class="required-icon">*</span></label><br>
                    <p>Select which group this user should belong to.</p>
                    <select class="form-control pointer" ng-model="newUserParams.groups"
                            ng-options="group.name for group in groups">
                    </select>
                </div>
                <div class="form-group">
                    <label>Email address</label>
                    <input type="email" ng-model="newUserParams.email" class="form-control"  placeholder="Enter user email address">
                </div>
                <div class="form-group">
                    <label>Mobile number</label><br>
                    <input class="form-control" type="text" placeholder="Enter user mobile number"
                           ng-model="newUserParams.mobile" ng-intl-tel-input>
                </div>
                <div class="form-group">
                    <label>First name</label>
                    <input type="text" ng-model="newUserParams.first_name" class="form-control"  placeholder="Enter first name" >
                </div>
                <div class="form-group">
                    <label>Last name</label>
                    <input type="text" ng-model="newUserParams.last_name" class="form-control"  placeholder="Enter last name">
                </div>
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" ng-change="fixformat()" ng-model="newUserParams.username" class="form-control"  placeholder="Enter username" >
                </div>
                <div class="form-group">
                    <label>Country of nationality</label>
                    <country-select class="form-control pointer" data-ng-model="newUserParams.nationality"></country-select>
                </div>
                <a ng-hide="showingMoreDetails" ng-click="toggleMoreDetails()" class="pull-left pointer">Advanced options</a>
                <div ng-show="showingMoreDetails">
                    <div class="form-group">
                        <label>Id number</label>
                        <input type="text" ng-model="newUserParams.id_number" class="form-control"  placeholder="Enter id number" >
                    </div>
                    <div class="form-group">
                        <label>Language</label>
                        <input type="text" ng-model="newUserParams.language" class="form-control"  placeholder="Enter language">
                    </div>
                    <div class="form-group">
                        <label>Profile picture</label>
                        <fieldset class="custom-file-upload">
                            <label>
                                <span class="custom-file-upload-span"><button>Choose File</button></span>
                                <input type="file" ngf-select ng-model="newUserParams.profile" name="file"
                                       accept="image/*" ngf-max-size="5MB" >
                            </label>
                        </fieldset>
                        <fieldset class="divider">
    
                        </fieldset>
                    </div>
                    <div class="form-group">
                        <label>Metadata</label>
                        <input type="text" ng-model="newUserParams.metadata" class="form-control"  placeholder='Enter metadata, e.g. {"hello":"world"}'>
                    </div>
                    <div class="form-group">
                        <label>Timezone</label>
                        <input type="text" ng-model="newUserParams.timezone" class="form-control"  placeholder="Enter timezone">
                    </div>
                </div>
                <a ng-show="showingMoreDetails" ng-click="toggleMoreDetails()" class="pull-left pointer">Hide advanced options</a>
                <div class="form-group">
                    <button  ng-click="addNewUser(newUserParams)" class="btn btn-primary dashboard-btn pull-right">Add</button>
                </div>
            </form>
        </div>
    </div>
</div>
<div ng-show="loadingUsers" ba-panel>
    <loading-image></loading-image>
</div>
