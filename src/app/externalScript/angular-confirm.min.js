"use strict";if("undefined"==typeof jQuery)throw new Error("angular-confirm requires jQuery");if("undefined"==typeof angular)throw new Error("angular-confirm requires Angular");angular.module("cp.ngConfirm",[]).service("$ngConfirmTemplate",function(){this.default='<div class="ng-confirm"><div class="ng-confirm-bg ng-confirm-bg-h"></div><div class="ng-confirm-scrollpane"><div class="ng-bs3-container"><div class="ng-bs3-row"><div class="ng-confirm-box-p"><div class="ng-confirm-box" role="dialog" aria-labelledby="labelled" tabindex="-1"><div class="ng-confirm-closeIcon"></div><div class="ng-confirm-title-c"><span class="ng-confirm-icon-c"><i></i></span><span class="ng-confirm-title"></span></div><div class="ng-confirm-content-pane"><div class="ng-confirm-content"></div></div><div class="ng-confirm-buttons"></div><div class="ng-confirm-clear"></div></div></div></div></div></div></div>'}).service("$ngConfirmDefaults",function(){return{title:"Hello",titleClass:"",type:"default",typeAnimated:!0,content:"Are you sure to continue?",contentUrl:!1,defaultButtons:{ok:function(){}},icon:"",theme:"white",bgOpacity:null,animation:"zoom",closeAnimation:"scale",animationSpeed:400,animationBounce:1.2,scope:!1,escapeKey:!1,rtl:!1,buttons:{},container:"body",containerFluid:!1,backgroundDismiss:!1,backgroundDismissAnimation:"shake",alignMiddle:!0,offsetTop:50,offsetBottom:50,autoClose:!1,closeIcon:null,closeIconClass:!1,columnClass:"small",boxWidth:"50%",useBootstrap:!0,bootstrapClasses:{container:"container",containerFluid:"container-fluid",row:"row"},onScopeReady:function(){},onReady:function(){},onOpenBefore:function(){},onOpen:function(){},onClose:function(){},onDestroy:function(){},onAction:function(){}}}).service("$ngConfirm",["$rootScope","$ngConfirmDefaults","$ngConfirmBase",function(t,i,s){return function(t,n,e){return"string"==typeof t&&((t={content:t,buttons:i.defaultButtons}).title="string"==typeof n&&n||!1,"object"==typeof n&&(t.scope=n),"object"==typeof e&&(t.scope=e)),void 0===t&&(t={}),t=angular.extend({},i,t),new s(t)}}]).factory("$ngConfirmBase",["$rootScope","$ngConfirmDefaults","$timeout","$compile","$ngConfirmTemplate","$interval","$templateRequest","$log","$q",function(t,i,s,n,e,o,a,l,c){var r=function(t){angular.extend(this,t),this._init()};return r.prototype={_init:function(){this._lastFocused=angular.element("body").find(":focus"),this._id=Math.round(999999*Math.random()),this.open()},_providedScope:!1,_prepare:function(){var i=this;this.$el=angular.element(e.default),i.scope?this._providedScope=!0:(this._providedScope=!1,i.scope=t.$new()),"function"==typeof this.onScopeReady&&this.onScopeReady.apply(this,[this.scope]),this.$confirmBox=this.$el.find(".ng-confirm-box"),this.$confirmBoxParent=this.$el.find(".ng-confirm-box-p"),this.$titleContainer=this.$el.find(".ng-confirm-title-c"),this.$title=this.$el.find(".ng-confirm-title"),this.$icon=this.$el.find(".ng-confirm-icon-c"),this.$content=this.$el.find(".ng-confirm-content"),this.$confirmBg=this.$el.find(".ng-confirm-bg"),this.$contentPane=this.$el.find(".ng-confirm-content-pane"),this.$closeIcon=this.$el.find(".ng-confirm-closeIcon"),this.$bs3Container=this.$el.find(".ng-bs3-container"),this.$buttonContainer=this.$el.find(".ng-confirm-buttons"),this.$scrollPane=this.$el.find(".ng-confirm-scrollpane");var s="ng-confirm-box"+this._id;if(this.$confirmBox.attr("aria-labelledby",s),this.$content.attr("id",s),this._setAnimationClass(this.animation),this.setDismissAnimation(this.backgroundDismissAnimation),this.setTheme(this.theme),this.setType(this.type),this._setButtons(this.buttons),this.setCloseIcon(this.closeIcon),this.setCloseIconClass(this.closeIconClass),this.setTypeAnimated(this.typeAnimated),this.useBootstrap?(this.setColumnClass(this.columnClass),this.$el.find(".ng-bs3-row").addClass(this.bootstrapClasses.row).addClass("justify-content-md-center justify-content-sm-center justify-content-xs-center justify-content-lg-center"),this.setContainerFluid(this.containerFluid)):this.setBoxWidth(this.boxWidth),this.setTitleClass(this.titleClass),this.setTitle(this.title),this.setIcon(this.icon),this.setBgOpacity(this.bgOpacity),this.setRtl(this.rtl),this._contentReady=c.defer(),this._modalReady=c.defer(),c.all([this._contentReady.promise,this._modalReady.promise]).then(function(){i.isAjax&&(i.setContent(i.content),i.loading(!1)),"function"==typeof i.onReady&&i.onReady.apply(i,[i.scope])}),this.contentUrl){this.loading(!0),this.isAjax=!0;var n=this.contentUrl;"function"==typeof this.contentUrl&&(n=this.contentUrl()),this.isAjaxLoading=!0,a(n).then(function(t){i.content=t,i._contentReady.resolve(),i.isAjaxLoading=!1},function(){i.content="",i._contentReady.resolve(),i.isAjaxLoading=!1})}else{var o=this.content;"function"==typeof this.content&&(o=this.content()),this.content=o,this.setContent(this.content),this._contentReady.resolve()}"none"==this.animation&&(this.animationSpeed=1,this.animationBounce=1),this.$confirmBg.css(this._getCSS(this.animationSpeed,1))},isAjax:!1,isAjaxLoading:!1,isLoading:!1,_hideClass:"ng-confirm-el-hide",_loadingClass:"ng-confirm-loading",loading:function(t){this.isLoading=t,t?this.$confirmBox.addClass(this._loadingClass):this.$confirmBox.removeClass(this._loadingClass)},setContent:function(t){if(this.$content){var i=n(t="<div>"+t+"</div>")(this.scope);this.$content.append(i)}else l.error("Attempted to set content before $content is defined")},_typeList:["default","blue","green","red","orange","purple","dark"],_typePrefix:"ng-confirm-type-",_pSetType:"",setType:function(t){if(-1==this._typeList.indexOf(t.toLowerCase()))return l.warn("Invalid dialog type: "+t),!1;var i=this._typePrefix+t;this.$el.removeClass(this._pSetType).addClass(i),this._pSetType=i},_setTypeAnimatedClass:"ng-confirm-type-animated",setTypeAnimated:function(t){t?this.$confirmBox.addClass(this._setTypeAnimatedClass):this.$confirmBox.removeClass(this._setTypeAnimatedClass)},_pTitleClass:"",setTitleClass:function(t){this.$titleContainer.removeClass(this._pTitleClass).addClass(t),this._pTitleClass=t},setBoxWidth:function(t){this.useBootstrap?l.warn("Cannot set boxWidth as useBootstrap is set to true. use columnClass instead."):this.$confirmBox.css("width",t)},setContainerFluid:function(t){this.useBootstrap?(t?this.$bs3Container.removeClass(this.bootstrapClasses.container).addClass(this.bootstrapClasses.containerFluid):this.$bs3Container.removeClass(this.bootstrapClasses.containerFluid).addClass(this.bootstrapClasses.container),this.containerFluid=t):l.warn("Cannot set containerFluid as useBootstrap is set to false.")},_pSetColumnClass:"",setColumnClass:function(t){if(this.useBootstrap){var i;switch(t=t.toLowerCase()){case"xl":case"xlarge":i="col-md-12";break;case"l":case"large":i="col-md-8 col-md-offset-2";break;case"m":case"medium":i="col-md-6 col-md-offset-3";break;case"s":case"small":i="col-md-4 col-md-offset-4 col-sm-6 col-sm-offset-3 col-xs-10 col-xs-offset-1";break;case"xs":case"xsmall":i="col-md-2 col-md-offset-5";break;default:i=t}this.$confirmBoxParent.removeClass(this._pSetColumnClass).addClass(i),this._pSetColumnClass=i}else l.warn("Cannot set columnClass as useBootstrap is set to false, use bixWidth instead")},setIcon:function(t){"function"==typeof t&&(t=t()),t?(this.$icon.html(angular.element("<i></i>").addClass(t)),this.$icon.removeClass(this._hideClass)):this.$icon.addClass(this._hideClass),this.icon||this.title?this.$titleContainer.removeClass(this._hideClass):this.$titleContainer.addClass(this._hideClass),this.icon=t},setTitle:function(t){"function"==typeof t&&(t=t()),t?(this.$title.html(t),this.$title.removeClass(this._hideClass)):this.$title.addClass(this._hideClass),this.icon||this.title?this.$titleContainer.removeClass(this._hideClass):this.$titleContainer.addClass(this._hideClass),this.title=t},setCloseIcon:function(t){0==this._buttonCount&&null==t&&(t=!0),t?this.$closeIcon.removeClass(this._hideClass):this.$closeIcon.addClass(this._hideClass),this.closeIcon=t},setCloseIconClass:function(t){var i;i=t?angular.element("<i></i>").addClass(this.closeIconClass):angular.element("<span>&times;</span>").addClass(this.closeIconClass),this.$closeIcon.html(i),this.closeIconClass=t},_animationPrefix:"ng-confirm-animation-",_pSetAnimation:"",_setAnimationClass:function(t){var i=this._prefixThis(t,this._animationPrefix);this.$confirmBox.removeClass(this._pSetAnimation).addClass(i),this._pSetAnimation=i},_removeAnimationClass:function(){this.$confirmBox.removeClass(this._pSetAnimation),this._pSetAnimation=""},_bgDismissPrefix:"ng-confirm-hilight-",_pSetDismissAnimation:"",setDismissAnimation:function(t){var i=this._prefixThis(t,this._bgDismissPrefix);this.$confirmBox.removeClass(this._pSetDismissAnimation).addClass(i),this._pSetDismissAnimation=i},_prefixThis:function(t,i){return t=t.split(","),angular.forEach(t,function(s,n){-1==s.indexOf(i)&&(t[n]=i+s.trim())}),t.join(" ").toLowerCase()},_setButtons:function(t){var i=this;"object"!=typeof t&&(t={}),angular.forEach(t,function(s,n){"function"==typeof s&&(t[n]=s={action:s}),t[n].text=s.text||n,t[n].btnClass=s.btnClass||"btn-default",t[n].action=s.action||angular.noop,t[n].keys=s.keys||[],t[n].disabled=s.disabled||!1,void 0===s.show&&(s.show=!0),t[n].show=s.show,angular.forEach(t[n].keys,function(i,s){t[n].keys[s]=i.toLowerCase()});var e=angular.element('<button type="button" class="btn"><span class="ng-confirm-btn-text"></span></button>');t[n].setText=function(t){e.find(".ng-confirm-btn-text").html(t)},t[n].setBtnClass=function(i){e.removeClass(t[n].btnClass).addClass(i),t[n].btnClass=i},t[n].setDisabled=function(i){i?e.attr("disabled","disabled"):e.removeAttr("disabled"),t[n].disabled=i},t[n].setShow=function(s){s?e.removeClass(i._hideClass):e.addClass(i._hideClass),t[n].show=s},t[n].setText(t[n].text),t[n].setBtnClass(t[n].btnClass),t[n].setDisabled(t[n].disabled),t[n].setShow(t[n].show),e.click(function(t){t.preventDefault(),i.triggerButton(n)}),t[n].el=e,i.$buttonContainer.append(e)}),this.buttons=t,this._buttonCount=Object.keys(t).length},_buttonCount:0,_themePrefix:"ng-confirm-",_pSetTheme:"",setTheme:function(t){var i=this._prefixThis(t,this._themePrefix);this.$el.removeClass(this._pSetTheme).addClass(i),this._pSetTheme=i},_rtlClass:"ng-confirm-rtl",setRtl:function(t){t?this.$el.addClass(this._rtlClass):this.$el.removeClass(this._rtlClass),this.rtl=t},setBgOpacity:function(t){this.$confirmBg.css("opacity",t),this.bgOpacity=t},_cubic_bezier:"0.36, 0.55, 0.19",_getCSS:function(t,i){return{"-webkit-transition-duration":t/1e3+"s","transition-duration":t/1e3+"s","-webkit-transition-timing-function":"cubic-bezier("+this._cubic_bezier+", "+i+")","transition-timing-function":"cubic-bezier("+this._cubic_bezier+", "+i+")"}},_hash:function(t){var i=t.toString(),s=0;if(0==i.length)return s;for(var n=0;n<i.length;n++){s=(s<<5)-s+i.toString().charCodeAt(n),s&=s}return s},_digestWatchUnRegister:!1,_bindEvents:function(){var t=this;this._digestWatchUnRegister=this.scope.$watch(function(){t.setDialogCenter("Digest watcher")}),this.$closeIcon.on("click."+t._id,function(){t._closeClick()}),angular.element(window).on("resize."+t._id,function(){t.setDialogCenter("Window Resize")}),angular.element(window).on("keyup."+t._id,function(i){t._reactOnKey(i)}),this.$scrollPane.on("click",function(){t._scrollPaneClick()}),this.$confirmBox.on("click",function(){t.boxClicked=!0})},_unBindEvents:function(){angular.element(window).off("resize."+this._id),angular.element(window).off("keyup."+this._id),this.$closeIcon.off("click."+this._id),this._digestWatchUnRegister&&this._digestWatchUnRegister()},_reactOnKey:function(t){var i=this,s=angular.element(".ng-confirm");if(s.eq(s.length-1)[0]!==this.$el[0])return!1;var n=t.which,e=this._getKey(n);if("esc"===e&&this.escapeKey)if(1==this.escapeKey)this._scrollPaneClick();else if("string"==typeof this.escapeKey||"function"==typeof this.escapeKey){var o=!1;(o="function"==typeof this.escapeKey?this.escapeKey():this.escapeKey)&&(angular.isDefined(this.buttons[o])?this._buttonClick(o):l.warn("Invalid escapeKey, no buttons found with name "+o))}angular.forEach(this.buttons,function(t,s){-1!=t.keys.indexOf(e)&&i._buttonClick(s)})},_scrollPaneClick:function(){if(this.boxClicked)return this.boxClicked=!1,!1;var t,i=!1,s=!1;if("string"==typeof(t="function"==typeof this.backgroundDismiss?this.backgroundDismiss():this.backgroundDismiss)&&angular.isDefined(this.buttons[t])?(i=t,s=!1):s=void 0===t||1==!!t,i){var n=this.buttons[i].action.apply(this,[this.scope,this.buttons[i]]);s=void 0===n||!!n}s?this.close():this.hiLightModal()},_closeClick:function(){var t,i=!1,s=!1;if("string"==typeof(t="function"==typeof this.closeIcon?this.closeIcon():this.closeIcon)&&angular.isDefined(this.buttons[t])?(i=t,s=!1):s=void 0===t||1==!!t,i){var n=this.buttons[i].action.apply(this,[this.scope,this.buttons[i]]);s=void 0===n||1==!!n}s&&this.close()},_hilightAnimating:!1,_hilightClass:"ng-confirm-hilight",hiLightModal:function(){var t=this;this._hilightAnimating||(this._hilightAnimating=!0,this.$confirmBox.addClass(this._hilightClass),setTimeout(function(){t._hilightAnimating=!1,t.$confirmBox.removeClass(t._hilightClass)},this.animationSpeed))},_buttonClick:function(t){var i=this.buttons[t].action.apply(this,[this.scope,this.buttons[t]]);return"function"==typeof this.onAction&&this.onAction.apply(this,[this.scope,t]),void 0===i||i?this.close():this.scope.$apply(),i},triggerButton:function(t){return this._buttonClick(t)},setDialogCenter:function(t){t=t||"n/a";var i=this.$content,s=i.outerHeight(),n=this.$contentPane.outerHeight(),e=i.children();if(0!=e.length){var o=parseInt(e.eq(0).css("margin-top"));o&&(s+=o)}var a=angular.element(window).height(),l=this.$confirmBox.outerHeight();if(0!=l){var c,r=l-n+s;r>a-(this.offsetTop+this.offsetBottom)||!this.alignMiddle?(c={"margin-top":this.offsetTop,"margin-bottom":this.offsetBottom},angular.element("body").addClass("ng-confirm-no-scroll-"+this._id)):(c={"margin-top":(a-r)/2,"margin-bottom":0},angular.element("body").removeClass("ng-confirm-no-scroll-"+this._id)),this.$contentPane.css({height:s}).scrollTop(0),this.$confirmBox.css(c)}},_getKey:function(t){switch(t){case 192:return"tilde";case 13:return"enter";case 16:return"shift";case 9:return"tab";case 20:return"capslock";case 17:return"ctrl";case 91:return"win";case 18:return"alt";case 27:return"esc"}var i=String.fromCharCode(t);return!!/^[A-z0-9]+$/.test(i)&&i.toLowerCase()},open:function(){var t=this;return this._prepare(),s(function(){t._open()},100),!0},_open:function(){var t=this;"function"==typeof this.onOpenBefore&&this.onOpenBefore.apply(this,[this.scope]),angular.element(this.container).append(this.$el),t.setDialogCenter("_open"),setTimeout(function(){t.$contentPane.css(t._getCSS(t.animationSpeed,1)),t.$confirmBox.css(t._getCSS(t.animationSpeed,t.animationBounce)),t._removeAnimationClass(),t.$confirmBg.removeClass("ng-confirm-bg-h"),t.$confirmBox.focus(),setTimeout(function(){t._bindEvents(),t.$confirmBox.css(t._getCSS(t.animationSpeed,1)),t._modalReady.resolve(),"function"==typeof t.onOpen&&t.onOpen.apply(t,[t.scope]),t._startCountDown()},t.animationSpeed)},100)},_autoCloseKey:!1,_autoCloseInterval:0,_startCountDown:function(){var t=this;if("string"==typeof this.autoClose){var i=this.autoClose.split("|");if(2==i.length){this._autoCloseKey=i[0];var s=i[1]/1e3;if(angular.isDefined(this.buttons[this._autoCloseKey])){var n=angular.element('<span class="ng-confirm-timer"></span>');this.buttons[this._autoCloseKey].el.append(n),this._autoCloseInterval=setInterval(function(){var i=s?" ("+--s+")":"";n.html(i),s<1&&(t._stopCountDown(),t._buttonClick(t._autoCloseKey))},1e3)}else l.error('Auto close button "'+t._autoCloseKey+'" not defined.')}else l.error("Invalid option for autoClose. example 'close|10000'")}},_stopCountDown:function(){this._autoCloseInterval&&clearInterval(this._autoCloseInterval)},closed:!1,isClosed:function(){return this.closed},isOpen:function(){return!this.closed},close:function(){var t=this;"function"==typeof this.onClose&&this.onClose.apply(this,[this.scope]),this._unBindEvents(),this._stopCountDown(),this._setAnimationClass(this.closeAnimation),this.$confirmBg.addClass("ng-confirm-bg-h");var i=.4*this.animationSpeed;return setTimeout(function(){t.$el.remove(),t.closed=!0,t._providedScope||t.scope.$destroy(),"function"==typeof t.onDestroy&&t.onDestroy.apply(t,[t.scope]),angular.element("body").removeClass("ng-confirm-no-scroll-"+t._id),t._lastFocused.focus(),t=void 0},i),!0}},r}]);